{% extends "admin/base_site.html" %}
{% load i18n %}

{% block extrahead %}
<style type="text/css">
.student {
    border: 1px solid black;
    margin-left: 1em;
    margin-top: 0.5em;
    padding: 0.5em;
}
.student table td {
    padding-top: 0.25em;
    padding-bottom: 0.25em;
    padding-left: 0.5em;
    padding-right: 0.5em;
}
.markDescription {
    font-style: italic;
}
.maximumPoints {
    color: grey;
}
.categoryAverage {
    font-weight: bold;
}
</style>
{% endblock %}

{% block content %}
    <h2> Grades - {{ course }} </h2>
    <form action="" method="post" enctype="multipart/form-data">
        {{ import_form }} 
        <input type="submit" value="Upload Grades" name="upload"/>
    </form>
    <p>{{ message }}</p>
    <hr />
    {% for mp in mps %}
	<h2>{{ mp.name }}</h2>
	{% for student in mp.students %}
	    <div class="student">
		<h3>{{ student }}</h3>
		<table>
		    <tr>
			{% for category in student.categories %}
			{% if category.marks %}
			    <td>
				<h4>{{ category.name }}</h4>
				<table>
				{% for mark in category.marks %}
				    <tr>
					<td>
					    {% if mark.item.name != 'None' %}
						{{ mark.item.name }}
					    {% endif %}
					    {% if mark.description %}
						<br /><span class="markDescription">{{ mark.description }}</span>
					    {% endif %}
					</td>
					<td>{{ mark.mark }} <span class="maximumPoints">(of {{ mark.item.scale.maximum }})</span></td>
				    </tr>
				{% endfor %}
				</table>
			    </td>
			{% endif %}
			{% endfor %}
		    </tr>
		    <tr>
			{% for category in student.categories %}
			{% if category.marks %}
			    <td class="categoryAverage">
				Average: {{ category.average }}
			    </td>
			{% endif %}
			{% endfor %}
		    </tr>
		</table>
	    </div>
	{% endfor %}
    {% endfor %}
{% endblock %}
