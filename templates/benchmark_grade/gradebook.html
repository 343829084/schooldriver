{% extends "admin/base_site.html" %}

{% block extrahead %}
    {{ block.super }}
    <script type="text/javascript" src="/static/js/gradebook/sh_main.min.js"></script>
    <script type="text/javascript" src="/static/js/gradebook/sh_javascript.js"></script>
    <script type="text/javascript" src="/static/js/gradebook/fixedtable.js"></script>
    <script type="text/javascript" src="/static/js/gradebook/gradebook.js"></script>
    <script type="text/javascript" src="/static/js/jquery.tools.min.js"></script>
    <script type="text/javascript" src="/static/js/init_admin_datepicker.js"></script>

    <link rel="stylesheet" href="/static/css/gradebook/style.css" type="text/css" media="screen">
    <link rel="stylesheet" href="/static/css/modal.css" type="text/css" media="screen">
{% endblock %}

{% block content %}
    <div class="topbar">
    
            <span class="logo">CRTC</span>
    
    </div><!-- topbar -->
    
    <div class="clear"></div>
    <div class="spacer"></div>
    
    <!-- wraps the menu and gradebook -->
    <div class="wrapper">
        
    <div class="menu">
        <form action="" method="get">
            <div class="filter_item">
                Student Cohort
                <div class="redbar"></div>
                {{ filter_form.cohort }}
            </div>
            
            <div class="filter_item">
                Session
                <div class="redbar"></div>
                {{ filter_form.marking_period }}
            </div>
            
            <div class="filter_item">
                Standard
                <div class="redbar"></div>
                {{ filter_form.benchmark }}
            </div>
            
            <div class="filter_item">
                Assignment Type
                <div class="redbar"></div>
                {{ filter_form.assignment_type }}
            </div>
            
            <div class="filter_item">
                {{ filter_form.name.label }}
                <div class="redbar"></div>
                {{ filter_form.name }}
            </div>
            
            <div class="filter_item">
                Dates
                <div class="redbar"></div>
                {{ filter_form.date_begin }}
                {{ filter_form.date_end }}
                <input type="submit" value="Filter"/>
            </div>
            <div class="redbar"></div>
            <input type="button" value="Create New Assignment" onclick="get_new_assignment_form(event)"/>
        </form>
    </div><!-- .menu -->
    
    <h2>{{ course }}</h2>
    
        <div id="tableDiv_General" class="tableDiv">
            <table id="Open_Text_General" class="FixedTables">
                <thead>
                    <tr>
                        <th>
                            Name
                        </th>
    
    {% for item in items %}
        <th><div class="assignment" onclick="get_edit_assignment_form(event)" item_id="{{ item.id }}">{{ item.markingPeriod.shortname }}<br />{{ item.category }}<br />{{ item.name}}<br/>{{ item.benchmark }}</div></th>
    {% endfor %}
                        <th>
                            Total
                        </th>
                        <th>
                            Average
                        </th>
                    </tr>
                </thead>
                <tbody>
    
                {% for student in students %}
                    {% with row_counter=forloop.counter0 %}
                    <tr>
                        <td>{{ student }}</td>
                        {% for mark in student.tidy_marks %}
                            <td id="tdc{{ forloop.counter0 }}_r{{ row_counter }}_mark{{ mark.id }}" onclick="select_cell(event)">
                                <div>{{ mark.mark }}</div>
                            </td>
                        {% endfor %}
                        <td>900</td><td>90%</td>
                    </tr>
                    {% endwith %}
                {% endfor %}
                
                </tbody>
            </table>
        </div>
    
    </div><!-- .wrapper -->
    
    
    <div id="new_assignment_form" class="modal">
        
    </div>
    
    
    <script type="text/javascript">
    jQuery("li").bind("mousemove", function(event) {
        $(this).find("div.tooltip").css({
            top: event.pageY + 5 + "px",
            left: event.pageX + 5 + "px"
        }).show();
    }).bind("mouseout", function() {
        $("div.tooltip").hide();
    });
    </script>

{% endblock %}
